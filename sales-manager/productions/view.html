<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Production Batch</title>

    <script
      src="https://kit.fontawesome.com/3d9946f29b.js"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="../../common/style.css" />
    <link rel="stylesheet" href="../../common/nav.css" />
    <link rel="stylesheet" href="../../common/notify.css" />
    <link rel="stylesheet" href="../user-flow.css" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/sweetalert2@11.9.0/dist/sweetalert2.min.css"
      rel="stylesheet"
    />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <script src="../../common/func.js"></script>
    <script src="../auth.js"></script>

    <style>
      .circular-progress {
        position: relative;
        height: 140px;
        width: 140px;
        border-radius: 50%;
        background-color: var(--pending-color);
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .circular-progress::before {
        content: "";
        position: absolute;
        height: 120px;
        width: 120px;
        border-radius: 50%;
        background-color: #fff;
      }

      .progress-value {
        position: relative;
        font-size: 18px;
        font-weight: 600;
      }

      .container .skill-box{
        width: 100%;
        margin: 25px 0;
      }

      .skill-box .title{
        display: block;
        font-size: 14px;
        font-weight: 600;
        color: #333;
      }

      .skill-box .skill-bar{
        height: 8px;
        width: 100%;
        border-radius: 6px;
        margin-top: 6px;
        background: rgba(0,0,0,0.1);
      }

      .skill-bar .skill-per{
        position: relative;
        display: block;
        height: 100%;
        width: 100%;
        background: #bb9056;
        border-radius: 6px;
        animation: progress 1s ease-in-out forwards;
        opacity: 0;
      }

      .skill-per.p1{
        width: 90%;
      }
      .skill-per.p2{
        width: 70%;
        animation-delay: 0.2s;
      }
      .skill-per.p3{
        width: 50%;
        animation-delay: 0.4s;
      }
      .skill-per.p4{
        width: 30%;
        animation-delay: 0.6s;
      }

      @keyframes progress {
        0%{
          width: 0;
          opacity: 0;
        }
        100%{
          opacity: 1;
        }
      }

      .skill-per .tooltip{
        position: absolute;
        right: -14px;
        top: -28px;
        font-size: 9px;
        font-weight: 500;
        color: #fff;
        padding: 2px 6px;
        border-radius: 3px;
        background-color: #bb9056;
        z-index: 1;
      }

      .tooltip::before{
        content: '';
        position: absolute;
        left: 50%;
        bottom: -2px;
        height: 10px;
        width: 10px;
        z-index: -1;
        background-color: #bb9056;
        transform: translateX(-50%) rotate(45deg);
      }
    </style>
  </head>

  <body>
    <!-- Loading screen -->
    <div class="loader-wrapper">
      <div class="logo-container">
        <img src="../../common/JOM logo 1.png" alt="" />
      </div>
      <div class="lds-spinner">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>
    </div>

    <nav class="sidebar"></nav>
    <i class="fa fa-bars" aria-hidden="true"></i>

    <!-- to yard light box starts -->
    <div class="overlay" id="overlay">
      <div class="split1-window split light-box">
        <p class="close-btn1 close-btn do-not">
          <i class="fas fa-xmark"></i>
        </p>
        <div class="split-content">
          <div>
            <p class="category">Virgin Coconut Oil</p>

            <p class="batch-no">Batch B17</p>
            <div class="charts">charts</div>

            <div class="container">
              <div class="skill-box">
                <span class="title">Product 1</span>
                <div class="skill-bar">
                  <span class="skill-per p1">
                    <span class="tooltip">90%</span>
                  </span>
                </div>
              </div>
              <div class="skill-box">
                <span class="title">Product 2</span>
                <div class="skill-bar">
                  <span class="skill-per p2">
                    <span class="tooltip">70%</span>
                  </span>
                </div>
              </div>
              <div class="skill-box">
                <span class="title">Product 3</span>
                <div class="skill-bar">
                  <span class="skill-per p3">
                    <span class="tooltip">50%</span>
                  </span>
                </div>
              </div>
              <div class="skill-box">
                <span class="title">Product 4</span>
                <div class="skill-bar">
                  <span class="skill-per p4">
                    <span class="tooltip">30%</span>
                  </span>
                </div>
              </div>
            </div>

            <button><p>Distribute Products</p></button>
          </div>
        </div>
      </div>
      <div class="split2-window split light-box">
        <p class="close-btn2 close-btn do-not">
          <i class="fas fa-xmark"></i>
        </p>
        <div class="split-content">
          <div class="distributors">
            <h3 class="distributors-h3">Distributors</h3>
            <button class="save form-button">Save</button>
            <table class="distributors-table overview-tables">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Progress</th>
                  <th>Add</th>
                  <!-- <th>Add</th>
                  <th>Total</th> -->
                </tr>
              </thead>

              <tbody class="tbody2"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- to yard light box ends -->

    <section class="home">
      <div class="notification">
        <span class="count">10</span>
        <span class="bell do-not"
          ><i class="fa-regular fa-bell do-not"></i
        ></span>
      </div>

      <div class="notification-window do-not" id="notify"></div>

      <div class="lng-picker">
        <div class="sin">සිං</div>
        <div class="en active">En</div>
      </div>

      <div class="text"></div>

      <div class="production-container salesmg-container">
        <div class="salesmg-heading table-heading">
          <h2 class="salesmg-title">Batch Number</h2>
          <p class="salesmg-text">View production batche details</p>
        </div>

        <div class="production-content">
          <div class="batch-data">
            <div class="batch-data-table">
              <table class="view-production-table overview-tables">
                <!-- <thead></thead> -->
                <tbody>
                  <tr>
                    <td>Batch No</td>
                    <td class="batch-no"></td>
                  </tr>
                  <tr>
                    <td>Current Status</td>
                    <td class="batch-status"></td>
                  </tr>
                  <tr>
                    <td>No of Products</td>
                    <td class="batch-status"></td>
                  </tr>
                  <tr>
                    <td>Created Date</td>
                    <td class="start-date"></td>
                  </tr>
                  <tr>
                    <td>Completed Date</td>
                    <td class="start-date"></td>
                  </tr>
                </tbody>
              </table>
            </div>

            <div class="progress-container">
              <div class="circular-progress">
                <span class="progress-value"></span>
              </div>
            </div>
          </div>

          <div class="products-data">
            <h3>Select a Product</h3>
            <table class="products-data-table overview-tables">
              <thead>
                <tr>
                  <th>Category</th>
                  <th>Type</th>
                  <th>Amount</th>
                  <th>Allocated Amount</th>
                  <th>Status</th>
                </tr>
              </thead>

              <tbody class="tbody2">
                <tr class="row">
                  <td>Virgin Coconut Oil</td>
                  <td>1L bottle</td>
                  <td>2000</td>
                  <td></td>
                  <td><button class="completed status">Completed</button></td>
                </tr>
                <tr class="row">
                  <td>Virgin Coconut Oil</td>
                  <td>1L bottle</td>
                  <td>2000</td>
                  <td></td>
                  <td><button class="completed status">Completed</button></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <div class="back-to-top">
        <i class="fas fa-chevron-up"></i>
      </div>
    </section>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.9.0/dist/sweetalert2.all.min.js"></script>
    <script src="./view.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
    <script src="../nav/load-nav.js"></script>
    <script src="../notifications/load-notifications.js"></script>
    <script src="../../common/loader.js"></script>
    <script>
      const tbody2 = document.querySelector(".tbody2"),
        rows = document.querySelectorAll(".row"),
        overlay = document.querySelector(".overlay"),
        closeBtn1 = document.querySelector(".close-btn1"),
        circularProgress = document.querySelector(".circular-progress"),
        progressValue = document.querySelector(".progress-value");

      rows.forEach((r) => {
        r.addEventListener("click", () => {
          overlay.style.display = "block";
          document.querySelector(".split1-window").style.display = "block";
        });
      });

      overlay.addEventListener("click", (e) => {
        if (e.target.id === "overlay") {
          overlay.style.display = "none";
          document.querySelector(".split1-window").style.display = "none";
        }
      });

      closeBtn1.addEventListener("click", () => {
        overlay.style.display = "none";
        document.querySelector(".split1-window").style.right = "none";
      });

      let startValue = 0,
        endValue = 100,
        speed = 50;

      let progress = setInterval(() => {
        progressValue.textContent = `${startValue}%`;
        circularProgress.style.background = `conic-gradient(#bb9056 ${
          startValue * 3.6
        }deg, #ededed 0deg)`;
        if (startValue == endValue) clearInterval(progress);
        startValue++;
      }, speed);
    </script>
  </body>
</html>
